@using TandemBooking.Services
@model TandemBooking.ViewModels.BookingAdmin.CompleteBookingViewModel
@{
    ViewData["Title"] = "Complete Booking";
}

<h2>@ViewData["Title"]</h2>

<div class="row">
    <div class="col-sm-12">
        <section>
            <div class="col-sm-12">
                <p></p>

                <form asp-controller="BookingAdmin" asp-action="Complete" method="post" role="form" onsubmit="return submitComplete()" class="form-horizontal">
                    <input type="hidden" name="Id" value="@Model.Booking.Id" />

                    <p>
                        Make sure that passenger fee matches the fee the passenger paid for the flight. Payment should be made to the dedicated pilot account. Either through Vipps or bank transfer by pilot, if the passenger is unable to use Vipps.
                    </p>

                    <div class="radio">
                        <label>
                            <input type="radio" asp-for="FlightType" value="@FlightType.Gondola" checked="@(Model.FlightType == FlightType.Gondola)" />
                            Flight from Hanguren using the cable car
                        </label>
                    </div>
                    <div class="radio">
                        <label>
                            <input type="radio" asp-for="FlightType" value="@FlightType.Winch" checked="@(Model.FlightType == FlightType.Winch)" />
                            Winch with boat (enter boat driver name below)
                        </label>
                    </div>
                    <div class="radio">
                        <label>
                            <input type="radio" asp-for="FlightType" value="@FlightType.Other" checked="@(Model.FlightType == FlightType.Other)" />
                            Flight from other takeoff
                        </label>
                    </div>


                    <div class="form-group">
                        <label asp-for="PassengerFee" class="col-md-2 control-label">Passenger fee</label>
                        <div class="col-md-10">
                            <input asp-for="PassengerFee" class="form-control" />
                            <span asp-validation-for="PassengerFee" class="text-danger" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label asp-for="BoatDriver" class="col-md-2 control-label">Boat driver (when winching)</label>
                        <div class="col-md-10">
                            <input asp-for="BoatDriver" class="form-control" />
                            <span asp-validation-for="BoatDriver" class="text-danger" />
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-md-2"></div>
                        <div class="col-md-10">
                            <button type="submit" class="btn btn-success">Complete Booking</button>
                        </div>
                    </div>
                </form>
            </div>
        </section>
        <div>
            <a href="@Url.Action("Details", new { id = Model.Booking.Id })">Back to Booking Details</a>
        </div>
    </div>
</div>

@section scripts
{
    <script>
        function submitComplete() {
            return confirm("Mark booking as completed?");
        }
    </script>
}
